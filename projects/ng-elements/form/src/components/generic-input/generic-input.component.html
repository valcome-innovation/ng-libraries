<div [formGroup]="form" class="input-group text"
     [ngClass]="{'invalid': !isValid}">

  <label *ngIf="label != null" [for]="id">
    {{label}}<span *ngIf="markAsRequired">*</span>
  </label>

  <div class="position-relative">
    <input [id]="id"
           [type]="type"
           [placeholder]="placeholder"
           [formControlName]="formName"
           (focus)="setFocus(true)"
           (blur)="setFocus(false)"
           autocomplete="{{autocomplete}}">

    <val-loading-spinner [show]="isLoading"
                         [dark]="true"
                         [size]="20">
    </val-loading-spinner>

    <div *ngIf="infoLabel" [ngClass]="{'show': hasFocus}" class="info alert">
      <ng-container [ngTemplateOutlet]="infoIcon"></ng-container>
      <span>{{ infoLabel }}</span>
    </div>
  </div>

  <div class="input-errors">
    <ng-content></ng-content>
    <val-generic-error-messages *ngIf="useDefaultErrorMessages"
                                (errorMessages)="addDefaultErrorMessages($event)">
    </val-generic-error-messages>
  </div>
</div>

<ng-template #infoIcon>
  <svg class="info icon" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M4.97218 3.1719C5.27287 3.1719 5.51662 2.92814 5.51662 2.62745C5.51662 2.32676 5.27287 2.08301 4.97218 2.08301C4.67149 2.08301 4.42773 2.32676 4.42773 2.62745C4.42773 2.92814 4.67149 3.1719 4.97218 3.1719Z"
      fill="#313131"/>
    <path
      d="M6.16753 6.94412H5.38976V3.83301H4.22309C4.11995 3.83301 4.02104 3.87398 3.9481 3.94691C3.87517 4.01984 3.8342 4.11876 3.8342 4.2219C3.8342 4.32504 3.87517 4.42395 3.9481 4.49688C4.02104 4.56981 4.11995 4.61079 4.22309 4.61079H4.61198V6.94412H3.8342C3.73106 6.94412 3.63215 6.98509 3.55922 7.05802C3.48628 7.13095 3.44531 7.22987 3.44531 7.33301C3.44531 7.43615 3.48628 7.53506 3.55922 7.60799C3.63215 7.68092 3.73106 7.7219 3.8342 7.7219H6.16753C6.27067 7.7219 6.36959 7.68092 6.44252 7.60799C6.51545 7.53506 6.55642 7.43615 6.55642 7.33301C6.55642 7.22987 6.51545 7.13095 6.44252 7.05802C6.36959 6.98509 6.27067 6.94412 6.16753 6.94412Z"
      fill="#313131"/>
    <path
      d="M5.00065 0.333008C4.07767 0.333008 3.17542 0.606703 2.40799 1.11948C1.64056 1.63226 1.04242 2.3611 0.689215 3.21382C0.336006 4.06654 0.243591 5.00485 0.423655 5.91009C0.60372 6.81534 1.04818 7.64686 1.70082 8.2995C2.35347 8.95215 3.18499 9.39661 4.09023 9.57667C4.99548 9.75673 5.93379 9.66432 6.78651 9.31111C7.63923 8.9579 8.36806 8.35976 8.88084 7.59233C9.39362 6.8249 9.66732 5.92265 9.66732 4.99967C9.66732 3.762 9.17565 2.57501 8.30048 1.69984C7.42531 0.824673 6.23833 0.333008 5.00065 0.333008ZM5.00065 8.88856C4.2315 8.88856 3.47963 8.66048 2.8401 8.23316C2.20058 7.80585 1.70213 7.19849 1.40779 6.48789C1.11345 5.77728 1.03643 4.99536 1.18649 4.24099C1.33654 3.48662 1.70692 2.79368 2.25079 2.24981C2.79466 1.70594 3.4876 1.33556 4.24197 1.18551C4.99634 1.03546 5.77826 1.11247 6.48887 1.40681C7.19947 1.70115 7.80683 2.1996 8.23414 2.83912C8.66146 3.47865 8.88954 4.23052 8.88954 4.99967C8.88954 5.51037 8.78895 6.01606 8.59352 6.48789C8.39808 6.95971 8.11163 7.38842 7.75051 7.74953C7.3894 8.11065 6.96069 8.3971 6.48887 8.59254C6.01704 8.78797 5.51135 8.88856 5.00065 8.88856Z"
      fill="#313131"/>
  </svg>
</ng-template>
